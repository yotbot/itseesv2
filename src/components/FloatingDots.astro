---
// FloatingDots.astro - The animated dots that persist throughout the page
---

<div id="dots-container" class="fixed inset-0 pointer-events-none z-50">
  <!-- Main dots - SVG for crisp scaling -->
  <svg
    id="dot1"
    class="absolute"
    width="20"
    height="20"
    viewBox="0 0 20 20"
  >
    <circle cx="10" cy="10" r="10" fill="#171717" />
  </svg>
  <svg
    id="dot2"
    class="absolute"
    width="20"
    height="20"
    viewBox="0 0 20 20"
  >
    <circle cx="10" cy="10" r="10" fill="#171717" />
  </svg>
</div>

<script>
  import { initDotsAnimation, cleanupDotsAnimation } from '../scripts/dots-animation';

  let initialized = false;

  function init() {
    if (initialized) return;
    initialized = true;
    initDotsAnimation();
  }

  // Initialize once when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init, { once: true });
  } else {
    init();
  }

  // Handle Astro view transitions
  document.addEventListener('astro:page-load', () => {
    initialized = false;
    init();
  });

  // Cleanup before page swap
  document.addEventListener('astro:before-swap', () => {
    cleanupDotsAnimation();
    initialized = false;
  });
</script>

<style>
  /* Dots styling can be added here */
</style>
