---
// ProcessSection.astro - 5 stages with alternating left/right layout
const stages = [
  {
    id: 'concept',
    number: '01',
    title: 'Concept',
    description: 'We explore your vision together',
    details: 'Every great project starts with understanding. We dive deep into your goals, audience, and aspirations to craft a clear roadmap for success.',
    align: 'left',
  },
  {
    id: 'design',
    number: '02',
    title: 'Design',
    description: 'Ideas take shape, excitement builds',
    details: 'Wireframes become mockups, mockups become prototypes. We iterate with you until every pixel feels right and the experience flows naturally.',
    align: 'right',
  },
  {
    id: 'build',
    number: '03',
    title: 'Build',
    description: 'Technical craft meets creative vision',
    details: 'Our engineers bring designs to life with clean, performant code. We use modern frameworks and best practices to ensure your site is fast, accessible, and maintainable.',
    align: 'left',
  },
  {
    id: 'host',
    number: '04',
    title: 'Host',
    description: 'Launch with confidence and speed',
    details: 'We deploy to battle-tested infrastructure with global CDN, automatic scaling, and rock-solid security. Your site loads fast from anywhere in the world.',
    align: 'right',
  },
  {
    id: 'maintain',
    number: '05',
    title: 'Maintain',
    description: 'Ongoing support, reliable partnership',
    details: 'Launch is just the beginning. We monitor, optimize, and evolve your digital presence as your business grows. You have a dedicated team in your corner.',
    align: 'left',
  },
];
---

<section id="process" class="relative bg-itsees-bg">
  {stages.map((stage, index) => (
    <div
      id={`stage-${stage.id}`}
      class="stage-section h-[150vh] pt-[30vh]"
      data-stage={stage.id}
    >
      <div class={`section-container h-full relative z-20 ${stage.align === 'right' ? 'flex justify-end' : ''}`}>
        <div class="process-card stage-card sticky top-[30vh] h-fit max-w-2xl p-8">
          <div class="flex items-baseline gap-4 mb-4">
            <span class="text-6xl md:text-8xl font-bold text-itsees-dark/20">
              {stage.number}
            </span>
            <h3 class="text-3xl md:text-5xl font-bold text-itsees-dark">
              {stage.title}
            </h3>
          </div>
          <p class="text-2xl md:text-3xl text-itsees-dark/80 mb-4 font-medium">
            {stage.description}
          </p>
          <p class="text-lg text-itsees-dark/60 leading-relaxed">
            {stage.details}
          </p>
        </div>
      </div>
    </div>
  ))}
</section>

<script>
  import gsap from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener('DOMContentLoaded', () => {
    // Animate each stage card on scroll
    gsap.utils.toArray('.stage-card').forEach((card, index) => {
      gsap.from(card as Element, {
        opacity: 0,
        x: index % 2 === 0 ? -50 : 50,
        scrollTrigger: {
          trigger: card as Element,
          start: 'top 80%',
          end: 'top 50%',
          scrub: 1,
        },
      });
    });

  });
</script>

<style>
  .direction-rtl {
    direction: rtl;
  }

  .direction-rtl > * {
    direction: ltr;
  }

  .process-card {
    @apply bg-white/80 backdrop-blur-sm rounded-2xl shadow-sm;
  }
</style>
